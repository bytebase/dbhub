---
title: "Multi-Database"
---

Connect to multiple databases from a single DBHub instance using TOML configuration. Useful for:
- Managing production, staging, and development databases
- Working with databases across different cloud providers
- Querying multiple database types simultaneously

## Configuration

Create a `dbhub.toml` file:

```toml dbhub.toml
# Database sources
[[sources]]
id = "production"
dsn = "postgres://user:password@prod.example.com:5432/myapp"

[[sources]]
id = "staging"
dsn = "mysql://root:password@localhost:3306/myapp_staging"

[[sources]]
id = "local"
dsn = "sqlite:///./dev.db"

# Tool configuration
# Production: read-only execute_sql with row limit, plus search_objects
[[tools]]
name = "execute_sql"
source = "production"
readonly = true
max_rows = 1000

[[tools]]
name = "search_objects"
source = "production"

# Staging: full access with higher row limit
[[tools]]
name = "execute_sql"
source = "staging"
max_rows = 5000

[[tools]]
name = "search_objects"
source = "staging"

# Local: default tools (both execute_sql and search_objects)
# No [[tools]] entries = both tools enabled by default
```

Start DBHub:

```bash
# Automatically loads ./dbhub.toml
npx @bytebase/dbhub@latest --transport http --port 8080

# Or specify custom location
npx @bytebase/dbhub@latest --config=/path/to/config.toml
```

See [Server Options](/config/server-options) for detailed option descriptions and [Tool Configuration](/tools/overview#tool-configuration) for controlling which tools are available per source.

## Examples

<Tabs>
  <Tab title="Using DSN">
    ```toml
    [[sources]]
    id = "production"
    dsn = "postgres://user:pass@prod.example.com:5432/myapp"

    [[sources]]
    id = "staging"
    dsn = "mysql://root:pass@localhost:3306/myapp_staging"

    # Production: read-only with row limit
    [[tools]]
    name = "execute_sql"
    source = "production"
    readonly = true
    max_rows = 1000

    [[tools]]
    name = "search_objects"
    source = "production"

    # Staging: full access (default tools)
    # No [[tools]] for staging = both tools enabled
    ```
  </Tab>

  <Tab title="Individual Parameters">
    ```toml
    # PostgreSQL with SSL
    [[sources]]
    id = "production"
    type = "postgres"
    host = "prod.example.com"
    port = 5432
    database = "myapp"
    user = "app_user"
    password = "p@ss:word"  # No URL encoding needed
    sslmode = "require"

    [[tools]]
    name = "execute_sql"
    source = "production"
    readonly = true

    # SQL Server with named instance
    [[sources]]
    id = "sqlserver_dev"
    type = "sqlserver"
    host = "localhost"
    port = 1433
    database = "mydb"
    user = "sa"
    password = "YourPassword123"
    instanceName = "SQLEXPRESS"
    sslmode = "disable"

    # SQL Server with NTLM authentication
    [[sources]]
    id = "corp_sqlserver"
    type = "sqlserver"
    host = "sqlserver.corp.local"
    port = 1433
    database = "app_db"
    user = "jsmith"
    password = "secret"
    authentication = "ntlm"
    domain = "CORP"

    # SQL Server with Azure AD (no password required)
    [[sources]]
    id = "azure_sqlserver"
    type = "sqlserver"
    host = "myserver.database.windows.net"
    port = 1433
    database = "mydb"
    user = "admin@tenant.onmicrosoft.com"
    authentication = "azure-active-directory-access-token"
    sslmode = "require"
    ```
  </Tab>

  <Tab title="With SSH Tunnel">
    ```toml
    # Simple SSH tunnel through bastion
    [[sources]]
    id = "production"
    dsn = "postgres://user:pass@db.internal:5432/myapp"
    ssh_host = "bastion.example.com"
    ssh_user = "deploy"
    ssh_key = "~/.ssh/id_rsa"

    [[tools]]
    name = "execute_sql"
    source = "production"
    readonly = true

    [[tools]]
    name = "search_objects"
    source = "production"

    # Multi-hop SSH tunnel (ProxyJump)
    [[sources]]
    id = "secure_db"
    dsn = "postgres://user:pass@db.secure:5432/myapp"
    ssh_host = "target.internal"
    ssh_user = "ubuntu"
    ssh_key = "~/.ssh/id_rsa"
    ssh_proxy_jump = "bastion1.example.com,admin@bastion2.internal:2222"
    ```
  </Tab>
</Tabs>

<Note>
The first `[[sources]]` entry is the default database used when no `id` is specified.
</Note>
