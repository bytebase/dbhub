---
title: "LibreChat"
---

DBHub can be integrated with [LibreChat](https://www.librechat.ai/) using either **stdio** or **Streamable HTTP** transport.

## Configuration Options

LibreChat supports two ways to connect to DBHub:

<Tabs>
  <Tab title="stdio (Recommended)">
    Best for single-user or local development. DBHub runs as a subprocess managed by LibreChat.

    Add to your LibreChat `librechat.yaml`:

    ```yaml
    mcpServers:
      dbhub:
        type: stdio
        command: npx
        args:
          - -y
          - "@bytebase/dbhub"
          - "--dsn"
          - "postgres://user:password@localhost:5432/dbname"
        timeout: 60000
    ```

    For demo mode:

    ```yaml
    mcpServers:
      dbhub:
        type: stdio
        command: npx
        args:
          - -y
          - "@bytebase/dbhub"
          - "--demo"
        timeout: 60000
    ```
  </Tab>

  <Tab title="Streamable HTTP">
    Best for multi-user deployments or when LibreChat runs in Docker.

    **Step 1:** Start DBHub in HTTP mode:

    ```bash
    npx @bytebase/dbhub --transport http --port 8080 --dsn "postgres://user:password@localhost:5432/dbname"
    ```

    Or with Docker:

    ```bash
    docker run -d \
      -p 8080:8080 \
      -e TRANSPORT=http \
      -e PORT=8080 \
      -e DSN="postgres://user:password@localhost:5432/dbname" \
      bytebase/dbhub
    ```

    **Step 2:** Add to your LibreChat `librechat.yaml`:

    ```yaml
    mcpServers:
      dbhub:
        type: streamable-http
        url: http://host.docker.internal:8080/mcp
        timeout: 60000
        serverInstructions: true
    ```

    <Note>
      **Docker Networking:** When LibreChat runs in Docker (e.g., with docker-compose), use `host.docker.internal:8080` to connect to DBHub running on your host machine. This is Docker's special DNS name that resolves to the host's IP address.

      For native installations, use `http://localhost:8080/mcp` instead.
    </Note>
  </Tab>
</Tabs>

## Complete Example

Here's a complete `librechat.yaml` configuration showing both transport options:

```yaml
mcpServers:
  # Option 1: stdio - DBHub runs as subprocess
  dbhub-stdio:
    type: stdio
    command: npx
    args:
      - -y
      - "@bytebase/dbhub"
      - "--demo"
    timeout: 60000

  # Option 2: Streamable HTTP - DBHub runs separately
  dbhub-http:
    type: streamable-http
    url: http://host.docker.internal:8080/mcp
    timeout: 60000
    serverInstructions: true
```

<Note>
  You can use both configurations simultaneously if you want to connect to different databases or test both transport methods.
</Note>

## Multiple Databases

You can configure multiple DBHub instances for different databases:

```yaml
mcpServers:
  production-db:
    type: streamable-http
    url: http://localhost:8080/mcp

  staging-db:
    type: streamable-http
    url: http://localhost:8081/mcp
```

Start each instance on different ports:

```bash
# Production
npx @bytebase/dbhub --transport http --port 8080 --dsn "postgres://user:pass@prod:5432/db"

# Staging
npx @bytebase/dbhub --transport http --port 8081 --dsn "postgres://user:pass@staging:5432/db"
```

## Per-User Credentials (Advanced)

For multi-tenant scenarios where each LibreChat user needs their own database credentials:

```yaml
mcpServers:
  dbhub:
    type: streamable-http
    url: http://localhost:8080/mcp
    headers:
      X-User-ID: "{{LIBRECHAT_USER_ID}}"
    customUserVars:
      DB_PASSWORD:
        title: "Database Password"
        description: "Your personal database password"
    startup: false
```

This requires implementing custom authentication middleware in DBHub (not currently built-in).

## Configuration Options

| Parameter | Description | Default |
|-----------|-------------|---------|
| `type` | Must be `streamable-http` | Required |
| `url` | DBHub HTTP endpoint URL | Required |
| `timeout` | Request timeout (ms) | 30000 |
| `initTimeout` | Initialization timeout (ms) | 10000 |
| `startup` | Auto-connect on startup | true |

## Troubleshooting

### Connection Errors

If you see "Failed to connect" errors:

1. **Verify DBHub is running:**
   ```bash
   curl http://localhost:8080/healthz
   ```

2. **Check the MCP endpoint:**
   ```bash
   curl -X POST http://localhost:8080/mcp \
     -H "Content-Type: application/json" \
     -H "Accept: application/json, text/event-stream" \
     -d '{"jsonrpc":"2.0","id":"1","method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"test","version":"1.0"}}}'
   ```

3. **For LibreChat in Docker:** Use `host.docker.internal:8080` instead of `localhost:8080`

   <Warning>
     This is critical! When LibreChat runs via docker-compose, `localhost` refers to the container itself, not your host machine. Always use `host.docker.internal` to access services running on your host.
   </Warning>

   Test from inside the container:
   ```bash
   docker exec -it librechat curl http://host.docker.internal:8080/healthz
   ```

### SSE Stream Errors

If you see "Failed to open SSE stream" errors, make sure you're using DBHub v0.11.9 or later. Earlier versions had SSE compatibility issues that have been resolved.

### Network Issues

- Ensure firewall rules allow connections between LibreChat and DBHub
- For production deployments, consider using HTTPS with proper TLS certificates
- Check LibreChat logs: Review the container logs for connection details

## Security Considerations

<Warning>
  DBHub HTTP mode exposes database access over the network. Use appropriate security measures:
  - Run behind a reverse proxy with authentication
  - Use read-only database credentials when possible
  - Restrict network access with firewall rules
  - Never expose DBHub HTTP port directly to the internet
</Warning>

## Next Steps

- Configure [multiple databases](/configuration/multi-database) with TOML
- Set up [SSH tunnels](/configuration/ssh-tunnels) for secure remote connections
- Enable [read-only mode](/configuration/security#read-only-mode) for production

## Resources

- [LibreChat MCP Documentation](https://www.librechat.ai/docs/configuration/librechat_yaml/object_structure/mcp_servers)
- [DBHub HTTP Transport Guide](/configuration/http-transport)
- [MCP Protocol Specification](https://modelcontextprotocol.io/)
